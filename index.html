<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Official website of SBSO Foundation - Come. Commit. Conquer.">
  <meta name="robots" content="index, follow">
  <meta name="keywords" content="SBSO Foundation, sports, youth, cricket, Bengaluru Super Sports League, BSSL, fitness, India">
  <link rel="icon" type="image/jpeg" href="SBSO_FOUNDATION.jpg">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <title>SBSO Foundation</title>
</head>
<body>
  <!-- PAGE LAYOUT GUIDE:
       01. Header & Navigation
       02. Hero (+ Org Logo)
       03. About
       04. Ventures
       05. Stats
       06. Ambassadors
       07. President
       08. Members
       09. Contact
       10. Partnerships
       11. Footer
  -->
  <!-- SECTION 01: HEADER & NAVIGATION -->
  <header>
    <nav class="pro-nav" id="site-nav">
      <div class="pro-nav__shell">
        <a class="pro-nav__brand" href="#top">
          <img src="SBSO_FOUNDATION.jpg" alt="SBSO logo" class="pro-nav__logo" width="58" height="58" decoding="async">
          <span class="pro-nav__identity">
            <span class="pro-nav__name">SBSO Foundation</span>
            <span class="pro-nav__motto">Come · Commit · Conquer</span>
          </span>
        </a>

        <button class="pro-nav__toggle" type="button" aria-expanded="false" aria-controls="nav-panel">
          <span class="pro-nav__toggle-bar"></span>
        </button>

        <div class="pro-nav__panel" id="nav-panel">
          <form class="pro-nav__search" role="search">
            <span class="pro-nav__search-icon fa-solid fa-magnifying-glass" aria-hidden="true"></span>
            <input type="search" id="nav-search-input" name="q" placeholder="Search..." aria-label="Search site" autocomplete="off">
            <ul class="pro-nav__search-results" id="nav-search-results"></ul>
          </form>

          <a class="pro-nav__cta" href="venture2.html">
            <i class="fa-solid fa-ticket" aria-hidden="true"></i>
            Register
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- SECTION 02: HERO -->
  <main>

    <!-- =========================
         HERO SECTION
    ========================== -->
    <section class="hero">
      <div class="hero__shell">
        <div class="hero__content">
          <p class="hero__eyebrow">Elite multi-city Sports Platform</p>
          <h2>Welcome to <span>SBSO Foundation</span></h2>
          <p>Come. Commit. Conquer.</p>
          <div class="hero__actions">
            <a href="venture2.html" class="btn">Register Now</a>
            <a href="#ventures" class="btn btn--ghost">Explore Ventures</a>
          </div>
        </div>
        <div class="hero__media">
          <figure class="hero__badge">
            <img src="SBSO_FOUNDATION.jpg" alt="SBSO Foundation crest" class="hero-img" decoding="async">
          </figure>
          <ul class="hero__meta">
            <li><strong>10+</strong><span>Major events</span></li>
            <li><strong>1L+</strong><span>Total viewers</span></li>
            <li><strong>3</strong><span>Cities united</span></li>
          </ul>
        </div>
      </div>
    </section>
    <!-- SECTION 03: ABOUT -->
    <!-- =========================
         ABOUT SECTION
    ========================== -->
    <section id="about" class="about">
      <h2>About Us</h2>
      <p>
        At SBSO Foundation, we believe that sports have the power to unite, inspire, and transform lives. As a dynamic sports event organization, we bring together players, enthusiasts, and communities through exciting tournaments in cricket, badminton, football, and more — across cities in India.
        Beyond the field, we are an NGO dedicated to building a healthier, more active, and empowered society. Our initiatives focus on promoting fitness, inclusion, and youth development, nurturing the next generation of athletes and changemakers.
        With our motto — “Come. Commit. Conquer.” — we invite everyone to step forward, give their best, and achieve greatness both on and off the ground. At SBSO Foundation, every game we organize is more than a competition — it’s a movement towards a better tomorrow through sports.
      </p>
    </section>
    <section id="ventures" class="ventures">
      <!-- =========================
         VENTURES SECTION (Main Page)
    ========================== -->
      <h2>Our Ventures</h2>
      <div class="info-grid">
        <a class="info-card" href="venture1.html" target="_blank" rel="noopener noreferrer">
          <img src="sbcl_logo.jpg" alt="Siliguri Boys Cricket League Logo" class="venture-logo" width="64" height="64" loading="lazy" decoding="async">
          <p>Siliguri Boys Cricket League</p>
        </a>
        <a class="info-card" href="venture2.html" target="_blank" rel="noopener noreferrer">
          <img src="bssl_logo.jpg" alt="Bengaluru Super Sports League Logo" class="venture-logo" width="64" height="64" loading="lazy" decoding="async">
          <p>Bengaluru Super Sports League</p>
        </a>
        <a class="info-card" href="venture3.html" target="_blank" rel="noopener noreferrer">
          <img src="kspl_logo.jpg" alt="Kolkata Sports Premier League Logo" class="venture-logo" width="64" height="64" loading="lazy" decoding="async">
          <p>Kolkata Sports Premier League</p>
        </a>
        <a class="info-card" href="venture4.html" target="_blank" rel="noopener noreferrer">
          <img src="wbssl_logo.jpg" alt="Womens Bengaluru Super Sports League Logo" class="venture-logo" width="64" height="64" loading="lazy" decoding="async">
          <p>Womens Bengaluru Super Sports League</p>
        </a>
        <a class="info-card" href="venture5.html" target="_blank" rel="noopener noreferrer">
          <img src="dpsl_logo.jpg" alt="Divyang Pro Super League Logo" class="venture-logo" width="64" height="64" loading="lazy" decoding="async">
          <p>Divyang Pro Super League</p>
        </a>
      </div>
    </section>
    <!-- SECTION 05: MAIN INTERFACE / STATS -->
    <!-- =========================
         MAIN INTERFACE / STATS SECTION
    ========================== -->
    <section class="main-interface-stats">
      <div class="stats-grid">
        <div class="stat-card"><span class="stat-value">5,000+</span><span class="stat-label">Live Streaming Viewership</span></div>
        <div class="stat-card"><span class="stat-value">5,000+</span><span class="stat-label">Live Footfall</span></div>
        <div class="stat-card"><span class="stat-value">10+</span><span class="stat-label">Events Hosted</span></div>
        <div class="stat-card"><span class="stat-value">3</span><span class="stat-label">No. Of Cities</span></div>
        <div class="stat-card"><span class="stat-value">30+</span><span class="stat-label">No. Of Partnerships</span></div>
        <div class="stat-card"><span class="stat-value">4+</span><span class="stat-label">Initiatives Hosted</span></div>
        <div class="stat-card"><span class="stat-value">1,00,000</span><span class="stat-label">Total Viewership</span></div>
        <div class="stat-card"><span class="stat-value">50+</span><span class="stat-label">Members Strength</span></div>
      </div>
    </section>
    <!-- SECTION 06: BRAND AMBASSADORS -->
    <!-- =========================
         AMBASSADOR SECTION
    ========================== -->
    <section id="ambassador" class="ambassador">
      <h2>Our Brand Ambassadors</h2>
      <div class="info-grid">
        <div class="info-card ambassador-card">
          <img src="Ambassador1.jpg" alt="Ivanko Bobeiko Photo" class="ambassador-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Ivanko Bobeiko</h3>
          <p class="ambassador-message">
            "Ivanko Bobeiko exemplifies a powerful blend of climate advocacy and wartime humanitarian service—bringing environmental justice into conversation with peace-building. Where innovation meets performance."
          </p>
        </div>
        <div class="info-card ambassador-card">
          <img src="Ambassador2.jpg" alt="RTN Ravindra Jain Photo" class="ambassador-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>RTN Ravindra Jain</h3>
          <p class="ambassador-message">
            "RTN Ravindra Jain A distinguished entrepreneur-turned-philanthropist from North Bengal, Mr. Jain has dedicated over five decades to community-building-leading major healthcare, education, environmental, and disability initiatives. His inspiring journey and unwavering support for youth and sports make him a perfect guide and motivator for our young cricketers."
          </p>
        </div>
      </div>
    </section>
    <!-- SECTION 07: PRESIDENT -->
    <!-- =========================
         PRESIDENT SECTION
    ========================== -->
    <section id="president" class="president">
      <h2>Our President, Founder & Director</h2>
      <div class="info-grid">
        <div class="info-card president-card">
          <img src="president_pic.jpg" alt="President Photo" class="president-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Argha Sengupta</h3>
          <p class="president-mission">
            "The backbone of the event and leads every aspect—sponsorship, team management, public relations, finance, and marketing. His tireless efforts have turned SBSO Foundation into more than just Event Venture; it’s a social movement. By promoting inclusivity, youth development, and community spirit through Sports, Argha empowers young talent and unites Sports across different cities of India. His leadership continues to inspire, shaping lives both on and off the pitch."
          </p>
        </div>
      </div>
    </section>

    <!-- SECTION 08: BOARD MEMBERS -->
    <!-- =========================
         MEMBERS SECTION
    ========================== -->
    <section id="members" class="members">
      <h2>Board Members</h2>
      <div class="info-grid">
        <div class="info-card member-card">
          <img src="sayan.jpg" alt="Sayan Karmakar" class="member-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Sayan Karmakar</h3>
          <p class="member-role">Co-founder & Vice President</p>
          <p class="member-bio">As Co-founder and Vice President of SBSO, I drive the development of sports initiatives, fostering talent and work as the Executive Embodiment . With a passion for sports, I work closely with athletes, and teams to achieve excellence and build a stronger sporting community.</p>
        </div>
        <div class="info-card member-card">
          <img src="asif.jpg" alt="Md Asif" class="member-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Md Asif</h3>
          <p class="member-role">Secretary of Divyang Pro Super League</p>
          <p class="member-bio">Md Asif, Divyang Pro Super League Secretary, is committed to holistic youth development through sports, education, and social impact. With leagues running across India, SBSO fosters talent, discipline, and community spirit. Asif ensures the foundation’s vision is executed through strategic planning, strong leadership, and impactful programs that go beyond the field to build future-ready citizens.</p>
        </div>
        <div class="info-card member-card">
          <img src="spandan.jpg" alt="Spandan Chaudhury" class="member-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Spandan Chaudhury</h3>
          <p class="member-role">Vice President of BSSL</p>
          <p class="member-bio">Spandan Chaudhury is the dynamic Vice President of the Bengaluru Super Sports League (BSSL). With a keen eye for detail and a passion for sports management, Spandan oversees event planning, team coordination, and on-ground execution. His leadership ensures that every tournament runs smoothly, from scheduling matches to managing logistics and supporting players. Spandan is known for his ability to motivate teams, resolve challenges quickly, and create a positive, energetic atmosphere for all participants. His dedication and organizational skills are vital to the continued success and growth of BSSL.</p>
        </div>
        <div class="info-card member-card">
          <img src="krithika.jpg" alt="Krithika Vijay" class="member-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Krithika Vijay</h3>
          <p class="member-role">Director of WBSSL</p>
          <p class="member-bio">Krithika Vijay is the Director of the Women’s Bengaluru Super Sports League (WBSSL). She is passionate about promoting women’s participation in sports and creating opportunities that highlight their talent and leadership. With a vision for an inclusive sporting culture, she empowers athletes, fosters teamwork, and inspires the next generation to break barriers and excel.</p>
        </div>
        <div class="info-card member-card">
          <img src="krish.jpg" alt="Krish" class="member-img" width="110" height="110" loading="lazy" decoding="async">
          <h3>Krish</h3>
          <p class="member-role">Deputy Secretary of Divyang Pro Super League</p>
          <p class="member-bio">I am currently serving as the Vice Secretary of the SBSO Foundation. I am deeply passionate about contributing to meaningful initiatives and driving positive change through our work. With full dedication and commitment, I look forward to supporting the foundation’s mission and making a lasting impact. I believe in working collaboratively and giving my best efforts to ensure the growth and success of SBSO.</p>
        </div>
      </div>
    </section>

    <!-- SECTION 09: CONTACT -->
    <!-- =========================
         CONTACT SECTION
    ========================== -->
    <section id="contact" class="contact">
      <h2>Contact Us</h2>
      <form class="contact-form animated-contact" action="mailto:blrsupersportsleague@gmail.com" method="POST" enctype="text/plain">
        <div class="contact-fields">
          <input type="text" name="name" placeholder="Your Name" required>
          <input type="email" name="email" placeholder="Your Email" required>
          <textarea name="message" placeholder="Your Message" required></textarea>
        </div>
        <button type="submit" class="btn contact-btn">Send</button>
      </form>
    </section>

    <!-- SECTION 10: PARTNERSHIPS -->
    <!-- =========================
         PARTNERSHIPS SECTION
    ========================== -->
    <section id="partnerships" class="partnerships">
      <h2>Our Partners</h2>
      <div class="partnerships-grid">
        <article class="partner-card"><img src="partnership1.png" alt="Prime Sports Arena logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership2.jpg" alt="Champion Gear Co. logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership3.png" alt="Pulse Media Network logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership4.jpg" alt="FitNation Labs logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership5.jpg" alt="Cityline Hospitality logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership6.jpg" alt="NextGen Analytics logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership7.jpg" alt="PulseCare Clinics logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership8.jpg" alt="AllStar Nutrition logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership9.png" alt="Community United logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership10.png" alt="New Partner logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership11.jpg" alt="Alliance Sports Network logo" loading="lazy" decoding="async"></article>
        <article class="partner-card"><img src="partnership12.png" alt="Victory Edge Solutions logo" loading="lazy" decoding="async"></article>
      </div>
    </section>
  </main>

  <!-- SECTION 11: FOOTER -->
  <!-- =========================
       FOOTER
    ========================== -->
  <footer class="site-footer">
    <div class="footer-shell">
      <section class="footer-panel footer-panel--brand">
        <a class="footer-brand" href="#top">
          <img src="SBSO_FOUNDATION.jpg" alt="SBSO Foundation" class="footer-brand__logo" width="68" height="68" decoding="async">
          <div>
            <h3 class="footer-brand__name">SBSO Foundation</h3>
            <p class="footer-brand__tagline">Come. Commit. Conquer.</p>
          </div>
        </a>
        <p class="footer-brand__copy">
          Building inclusive sporting ecosystems across cities with professional leagues, pathways, and social impact initiatives.
        </p>
        <div class="footer-social">
          <a href="mailto:sbsofoundation@gmail.com" aria-label="Email"><i class="fa-solid fa-envelope"></i></a>
          <a href="https://www.instagram.com/sbso_foundation?igsh=MTA4NHZkZWp3ZmE1cw==" target="_blank" rel="noopener" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
          <a href="https://www.linkedin.com/company/sbso-foundation/" target="_blank" rel="noopener" aria-label="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
          <a href="https://www.youtube.com/@sbsofoundation" target="_blank" rel="noopener" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
        </div>
      </section>

      <section class="footer-panel footer-panel--links">
        <h4>Explore</h4>
        <nav aria-label="Footer navigation">
          <ul class="footer-links">
            <li><a href="#about">About Us</a></li>
            <li><a href="#ventures">Ventures</a></li>
            <li><a href="#ambassador">Ambassadors</a></li>
            <li><a href="#members">Board Members</a></li>
            <li><a href="venture2.html">Register Teams</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </nav>
      </section>

      <section class="footer-panel footer-panel--support">
        <h4>Need Support?</h4>
        <ul class="footer-contact">
          <li>
            <i class="fa-solid fa-envelope"></i>
            <a href="mailto:sbsofoundation@gmail.com">sbsofoundation@gmail.com</a>
          </li>
          <li>
            <i class="fa-solid fa-phone"></i>
            <a href="tel:+919900384517">+91&nbsp;99003&nbsp;84517</a>
          </li>
          <li>
            <i class="fa-solid fa-location-dot"></i>
            <span>Bengaluru, Karnataka, India</span>
          </li>
        </ul>
        <a class="btn btn--ghost footer-cta-link" href="#contact">Talk to Us</a>
      </section>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2024 SBSO Foundation. All rights reserved.</p>
      <p>Empowering Youth Through Sports</p>
    </div>
  </footer>

  <script>
/* Enhanced search: debounced, scored, keyboard navigation, a11y roles */
document.addEventListener('DOMContentLoaded', () => {
  const nav = document.getElementById('site-nav');
  const navPanel = document.getElementById('nav-panel');
  const navToggle = nav?.querySelector('.pro-nav__toggle');
  const navTargets = navPanel?.querySelectorAll('a, button');
  const breakpoint = window.matchMedia('(min-width: 981px)');
  const searchForm = nav?.querySelector('.pro-nav__search');
  const searchInput = document.getElementById('nav-search-input');
  const searchResults = document.getElementById('nav-search-results');

  if (!searchInput || !searchResults) return;

  // ARIA plumbing for result list
  searchResults.setAttribute('role', 'listbox');
  searchResults.setAttribute('aria-label', 'Search results');

  // Utility: debounce
  function debounce(fn, wait = 180) {
    let t;
    return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), wait); };
  }

  // Escape HTML
  const escapeHtml = (s = '') =>
    String(s).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');

  // Build a search index (deduped)
  function buildIndex() {
    const items = [];

    // static quick links
    const staticIndex = [
      { label: 'About Us', hint: 'Foundation story', target: '#about', icon: 'fa-landmark' },
      { label: 'Ventures', hint: 'Active leagues', target: '#ventures', icon: 'fa-trophy' },
      { label: 'Brand Ambassador', hint: 'Ambassador spotlight', target: '#ambassador', icon: 'fa-star' },
      { label: 'President', hint: 'Leadership insights', target: '#president', icon: 'fa-user-tie' },
      { label: 'Board Members', hint: 'Core committee', target: '#members', icon: 'fa-users' },
      { label: 'Contact', hint: 'Reach the team', target: '#contact', icon: 'fa-phone-volume' },
      { label: 'BSSL Cloud', hint: 'Bengaluru Super Sports League', target: 'venture2.html', icon: 'fa-baseball-bat-ball' }
    ];
    items.push(...staticIndex);

    // headings
    document.querySelectorAll('main h1, main h2, main h3').forEach(h => {
      const text = (h.textContent || '').trim();
      if (!text) return;
      if (!h.id) {
        let id = text.toLowerCase().replace(/[^\w]+/g, '-').replace(/(^-+|-+$)/g, '');
        let uniq = id; let i = 1;
        while (document.getElementById(uniq)) { uniq = `${id}-${i++}`; }
        h.id = uniq;
      }
      items.push({ label: text, hint: 'Section', target: `#${h.id}`, icon: 'fa-file-lines' });
    });

    // anchors/links
    document.querySelectorAll('a[href]').forEach(a => {
      const href = a.getAttribute('href') || '';
      const text = (a.textContent || a.getAttribute('title') || a.getAttribute('aria-label') || href).trim();
      if (!text) return;
      items.push({
        label: text,
        hint: href,
        target: href,
        icon: href.startsWith('#') ? 'fa-link' : 'fa-arrow-right'
      });
    });

    // image alts
    document.querySelectorAll('img[alt]').forEach(img => {
      const alt = (img.alt || '').trim();
      if (alt) items.push({ label: alt, hint: 'Image', target: '#', icon: 'fa-image' });
    });

    // dedupe by label+target
    const map = new Map();
    items.forEach(it => {
      const key = `${(it.label||'').toLowerCase()}||${it.target||''}`;
      if (!map.has(key)) map.set(key, it);
    });

    return Array.from(map.values()).map((it, idx) => {
      // precompute searchable normalized text for faster search
      return Object.assign({}, it, {
        _norm: `${it.label} ${it.hint} ${it.target}`.toLowerCase(),
        _id: `sr-${idx}`
      });
    });
  }

  let searchIndex = buildIndex();

  // Observe DOM changes and rebuild (light)
  const obs = new MutationObserver(debounce(() => { searchIndex = buildIndex(); }, 400));
  obs.observe(document.body, { childList: true, subtree: true });

  // Scoring function (simple, fast)
  function scoreItem(item, q) {
    const label = (item.label || '').toLowerCase();
    const hint = (item.hint || '').toLowerCase();
    const target = (item.target || '').toLowerCase();
    if (!q) return 0;
    let score = 0;
    if (label.startsWith(q)) score += 200;
    if (label.includes(q)) score += 120;
    if (hint.includes(q)) score += 40;
    if (target.includes(q)) score += 20;
    // word matches
    const qParts = q.split(/\s+/).filter(Boolean);
    qParts.forEach(part => {
      if (label.split(/\s+/).some(w => w.startsWith(part))) score += 8;
    });
    // short boost for exact match
    if (label === q) score += 400;
    return score;
  }

  // render results (adds roles and ids)
  function renderResults(items, headingText = 'Results') {
    const max = 12;
    if (!items || !items.length) {
      searchResults.innerHTML = `
        <li class="pro-nav__search-heading">${escapeHtml(headingText)}</li>
        <li class="pro-nav__search-result is-empty">No matches found</li>
      `;
      searchResults.classList.add('visible');
      searchResults.setAttribute('aria-hidden', 'false');
      activeIndex = -1;
      return;
    }

    const html = [
      `<li class="pro-nav__search-heading">${escapeHtml(headingText)}</li>`,
      ...items.slice(0, max).map((item, idx) => {
        const id = escapeHtml(item._id || `sr-${idx}`);
        return `
          <li class="pro-nav__search-result" role="presentation">
            <a id="${id}" role="option" tabindex="-1" aria-selected="false" href="${escapeHtml(item.target)}" data-target="${escapeHtml(item.target)}" class="search-link">
              <span class="result-label">
                <span class="result-icon"><i class="fa-solid ${escapeHtml(item.icon || 'fa-magnifying-glass')}" aria-hidden="true"></i></span>
                <span class="result-title">${escapeHtml(item.label)}</span>
              </span>
              <span class="result-meta">${escapeHtml(item.hint || '')}</span>
            </a>
          </li>
        `;
      })
    ].join('');
    searchResults.innerHTML = html;
    searchResults.classList.add('visible');
    searchResults.setAttribute('aria-hidden', 'false');
    // reset active index
    activeIndex = -1;
    // Cache result anchors
    resultAnchors = Array.from(searchResults.querySelectorAll('a.search-link'));
  }

  // search engine: compute scores and sort
  function searchQuery(q) {
    const term = (q || '').trim().toLowerCase();
    if (!term) {
      renderResults(searchIndex.slice(0, 6), 'Quick Links');
      return;
    }
    const scored = searchIndex.map(it => ({ it, s: scoreItem(it, term) }));
    const filtered = scored.filter(x => x.s > 0).sort((a,b) => b.s - a.s).map(x => x.it);
    renderResults(filtered, 'Search Results');
  }

  const debouncedSearch = debounce((val) => searchQuery(val), 160);

  // keyboard navigation
  let resultAnchors = [];
  let activeIndex = -1;
  function setActive(index) {
    if (!resultAnchors.length) return;
    if (activeIndex >= 0 && resultAnchors[activeIndex]) {
      resultAnchors[activeIndex].setAttribute('aria-selected', 'false');
      resultAnchors[activeIndex].classList.remove('is-active');
      resultAnchors[activeIndex].blur();
    }
    activeIndex = index;
    if (activeIndex >= 0 && resultAnchors[activeIndex]) {
      const el = resultAnchors[activeIndex];
      el.setAttribute('aria-selected', 'true');
      el.classList.add('is-active');
      el.focus({ preventScroll: true });
      searchInput.setAttribute('aria-activedescendant', el.id);
    } else {
      searchInput.removeAttribute('aria-activedescendant');
    }
  }

  // input handlers
  searchInput.setAttribute('aria-controls', searchResults.id);
  searchInput.setAttribute('aria-autocomplete', 'list');

  searchInput.addEventListener('input', (e) => {
    debouncedSearch(e.target.value);
  });

  searchInput.addEventListener('focus', () => {
    // show quick links
    renderResults(searchIndex.slice(0,6), 'Quick Links');
  });

  // keydown: navigation
  searchInput.addEventListener('keydown', (e) => {
    if (!searchResults.classList.contains('visible')) return;
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      if (activeIndex < resultAnchors.length - 1) setActive(activeIndex + 1);
      else setActive(0);
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (activeIndex > 0) setActive(activeIndex - 1);
      else setActive(resultAnchors.length - 1);
    } else if (e.key === 'Enter') {
      // if an active result exists, follow it; otherwise allow form submit handler
      if (activeIndex >= 0 && resultAnchors[activeIndex]) {
        e.preventDefault();
        const href = resultAnchors[activeIndex].dataset.target || resultAnchors[activeIndex].getAttribute('href');
        if (href.startsWith('#')) {
          const el = document.querySelector(href);
          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
          else window.location.hash = href;
        } else {
          window.location.href = href;
        }
        closeResults();
      }
    } else if (e.key === 'Escape') {
      closeResults();
      searchInput.blur();
    }
  });

  // mouse: clicking a result (delegated)
  searchResults.addEventListener('click', (evt) => {
    const a = evt.target.closest('a[data-target]');
    if (!a) return;
    evt.preventDefault();
    const target = a.dataset.target || a.getAttribute('href');
    if (target.startsWith('#')) {
      const el = document.querySelector(target);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      else window.location.hash = target;
    } else {
      window.location.href = target;
    }
    closeResults();
  });

  // mouseover sets active for better a11y
  searchResults.addEventListener('pointerover', (evt) => {
    const a = evt.target.closest('a[data-target]');
    if (!a) return;
    const idx = resultAnchors.indexOf(a);
    if (idx >= 0) setActive(idx);
  });

  function closeResults() {
    searchResults.classList.remove('visible');
    searchResults.setAttribute('aria-hidden', 'true');
    activeIndex = -1;
    resultAnchors = [];
    searchInput.removeAttribute('aria-activedescendant');
  }

  // form submit behaviour: use best match
  searchForm?.addEventListener('submit', (evt) => {
    evt.preventDefault();
    const term = (searchInput.value || '').trim().toLowerCase();
    if (!term) { searchInput.focus(); return; }
    const matches = searchIndex.filter(it => it._norm.includes(term));
    if (matches.length) {
      const target = matches[0].target;
      if (target.startsWith('#')) {
        document.querySelector(target)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        window.location.href = target;
      }
      closeResults();
      return;
    }
    // show empty state
    renderResults([], 'Search Results');
  });

  // click outside closes dropdown
  document.addEventListener('click', (evt) => {
    if (!nav?.contains(evt.target)) closeResults();
  });

  // keep existing nav toggle behavior intact (if present)
  if (nav && navToggle) {
    const closeNav = () => {
      nav.classList.remove('is-open');
      navToggle.setAttribute('aria-expanded', 'false');
    };
    navToggle.addEventListener('click', () => {
      const open = nav.classList.toggle('is-open');
      navToggle.setAttribute('aria-expanded', String(open));
      if (!open) closeResults();
    });
    navTargets?.forEach((node) => node.addEventListener('click', () => {
      if (!breakpoint.matches) closeNav();
    }));
    breakpoint.addEventListener('change', (evt) => { if (evt.matches) closeNav(); });
    document.addEventListener('click', (evt) => {
      if (!nav.contains(evt.target)) {
        closeNav();
        closeResults();
      }
    });
  }
});
</script>
</body>
</html>